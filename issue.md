所以說我有3個角色： `管理員`, `編輯者` 和 `使用者`.

 - `管理員` 可以編輯 **所有人的文章**.
   
 - `編輯者` 可以編輯所有人的文章但是 **管理員的除外**.
   
 - `使用者` **只可以編輯他們自己的文章**.

&nbsp;

# 舉例資料庫架構

這裡是個我已經規劃好的資料庫架構。

&nbsp;

### 文章表格

    +----+------------+---------------+
    | id |  author    |    content    |
    +----+------------+---------------+
    | 1  | 我是使用者 | foobar.       |
    | 2  | 我是編輯者 | hello, world! |
    | 3  | 我是管理員 | Hi!           |
    +----+------------+---------------+

&nbsp;

### 使用者表格

    +------------+-----------+
    | username   |   rank    |
    +------------+-----------+
    | 我是使用者 | 使用者    |
    | 我是編輯者 | 編輯者    |
    | 我是管理員 | 管理員    |
    +------------+-----------+

&nbsp;

### 使用者權限表格

每當使用者新增一篇文章，就插入一列

*我是使用者* 和 *我是編輯者* 建立了他們自己的文章，**所以他們獲得編輯自己文章的權限。**.

    +------------+--------+---------------+-------------+
    | username   | action | resource_type | resource_id |
    +------------+--------+---------------+-------------+
    | 我是使用者 | 編輯   | 文章          |           1 |
    | 我是編輯者 | 編輯   | 文章          |           2 |
    | 我是管理員 | 編輯   | 文章          |           3 |
    +------------+--------+---------------+-------------+

&nbsp;

### 規則權限表格

管理員可以編輯任何文章，所以設置 `resource_id` 為 null. 

編輯者的那一行是在 ***我是使用者* 建立文章後** 插入，

所以 **編輯者有權限去編輯文章 #1**.

    +--------+--------+---------------+-------------+
    |  role  | action | resource_type | resource_id |
    +--------+--------+---------------+-------------+
    | 管理員 | 編輯   | 文章          | NULL        |
    | 編輯者 | 編輯   | 文章          | 1           |
    +--------+--------+---------------+-------------+

&nbsp;

# 問題

如果我今天要新增一個角色名為 '版主'，

而 *版主* **應該要有權限去編輯 編輯者 和 使用者的文章**，

但是因為 **我是在 *我是使用者* 和 *我是編輯者* 新增他們的文章後 (#1 和 #2)** 才新增這個角色

所以現在 *版主* **沒有權限去編輯文章 #1 和 #2**，我要如何解決這個問題？

&nbsp;

# 總結

1.**如何修正權限問題？**

2.**使用這個架構不好嗎？**
